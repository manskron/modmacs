* Package manager
#+begin_src emacs-lisp
  (require 'package)

  (setq package-archives '(("melpa" . "https://melpa.org/packages/")
			  ("melpa-stable" . "https://stable.melpa.org/packages/")
			  ("org" . "https://orgmode.org/elpa/")
			  ("elpa" . "https://elpa.gnu.org/packages/")))

  (package-initialize)

  ;; Initialize use-package on non-Linux platforms
  (unless (package-installed-p 'use-package)
      (package-install 'use-package))
  (require 'use-package)
  (setq use-package-always-ensure t)
#+end_src

* Packages
** org
#+begin_src emacs-lisp
  (use-package org)
#+end_src

** evil
#+begin_src emacs-lisp
  (use-package evil
    :config
    (evil-mode 1))
#+end_src
** magit
#+begin_src emacs-lisp
  (use-package magit)
#+end_src

** general
#+begin_src emacs-lisp
(use-package general
  :config
  (general-evil-setup t))
#+end_src

** lsp-mode
#+begin_src emacs-lisp
  (use-package lsp-mode)
#+end_src

** Vertico
#+begin_src emacs-lisp
  (use-package vertico
    :init
    (vertico-mode))
#+end_src

** which-key
#+begin_src emacs-lisp
  (use-package which-key
    :init
    (which-key-mode)
    :diminish which-key-mode
    :config
    (setq which-key-idle-delay 0.3))
#+end_src

* Theme

#+begin_src emacs-lisp
  (load-theme 'modus-vivendi t)
#+end_src

* Keybindings
*** General
#+begin_src emacs-lisp
  (nvmap :keymaps 'override :prefix "SPC"
    "SPC"   '(execute-extended-command :which-key "M-x")
    "b" '(:which-key "Buffers")
    "e" '(eshell :which-key "Eshell")
    "f" '(:which-key "File")
    "g" '(:which-key "Magit")
  )
#+end_src

*** Buffers
#+begin_src emacs-lisp
  (nvmap :states '(normal visual) :keymaps 'override :prefix "SPC"
     "b b"   '(switch-to-buffer :which-key "List")
     "b k"   '(kill-buffer :which-key "Kill")
     "b l"   '(next-buffer :which-key "Next")
     "b h"   '(previous-buffer :which-key "Next")
  )
#+end_src

*** Files
#+begin_src emacs-lisp
  (nvmap :states '(normal visual) :keymaps 'override :prefix "SPC"
     "f f"   '(find-file :which-key "Find file")
     "f r"   '(recentf-open-files :which-key "Recent file")
     "f s"   '(save-buffer :which-key "Save file")
     "f S"   '(write-file :which-key "Save file as...")
     "f c"   '((lambda () (interactive) (find-file "~/modmacs/config.org")) :which-key: "Config")
  )
#+end_src

*** Files
#+begin_src emacs-lisp
  (nvmap :states '(normal visual) :keymaps 'override :prefix "SPC"
     "g s"   '(magit-status :which-key "Status")
  )
#+end_src

* Misc settings
*** Font size
#+begin_src emacs-lisp
  (set-face-attribute 'default nil
    :height 150)
#+end_src

*** Start with a scratch buffer
 #+begin_src emacs-lisp
  (setq inhibit-startup-message t)
#+end_src

*** Disable Menubar, Toolbars and Scrollbars
#+begin_src emacs-lisp
  (menu-bar-mode -1)
  (tool-bar-mode -1)
  (scroll-bar-mode -1)
#+end_src

*** Highlight active line
#+begin_src emacs-lisp
  (hl-line-mode t)
#+end_src

*** Show line numbers
#+begin_src emacs-lisp
  (global-display-line-numbers-mode 1)
#+end_src

*** Refresh buffer if the underlying file changes
#+begin_src emacs-lisp
  (global-auto-revert-mode 1) 
#+end_src

*** Refresh dired when files change
#+begin_src emacs-lisp
  (setq global-auto-revert-non-file-buffers t) 
#+end_src

*** Enable recent files
#+begin_src emacs-lisp
  (recentf-mode 1)
#+end_src

*** Restore last cursor location in previously opened files
#+begin_src emacs-lisp
  (save-place-mode 1)
#+end_src

